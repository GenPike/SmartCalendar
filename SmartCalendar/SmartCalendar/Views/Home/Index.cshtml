
@{
    Layout = null;
}
@Html.Hidden("Id", (string)ViewBag.UserId)

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Home page</title>
    <script src="~/Scripts/dhtmlxscheduler/sources/dhtmlxscheduler.js" type="text/javascript"></script>
    <link rel="stylesheet" href="~/Content/dhtmlxscheduler/dhtmlxscheduler.css" type="text/css">
    <link rel="stylesheet" href="~/Content/custom/fullScreenProps.css" type="text/css">
</head>
<body>
    <div id="scheduler_here" class="dhx_cal_container" style='width: 100%; height: 100%;'>
        <div class="dhx_cal_navline">
            <div class="dhx_cal_prev_button">&nbsp;</div>
            <div class="dhx_cal_next_button">&nbsp;</div>
            <div class="dhx_cal_today_button"></div>
            <div class="dhx_cal_date"></div>
            <div class="dhx_cal_tab" name="day_tab" style="right: 204px;"></div>
            <div class="dhx_cal_tab" name="week_tab" style="right: 140px;"></div>
            <div class="dhx_cal_tab" name="month_tab" style="right: 76px;"></div>
        </div>
        <div class="dhx_cal_header"></div>
        <div class="dhx_cal_data"></div>
    </div>

    <script src="~/Scripts/jquery-1.10.2.min.js" type="text/javascript"></script>
    <script>
        //the scheduler is a static object and can be instantiate on the page once
        scheduler.init('scheduler_here', new Date(), "month");

        $(function () {
            jQuery.support.cors = true;
            var start = new Date();
            var end = new Date(2016, 8, 11);

            $.ajax({
                url: '/api/Event/',
                dataType: 'json',
                data: {
                    userId: $('input[name =Id]').val(),
                    start: start.getTime()/1000,
                    end: end.getTime() / 1000
                },
                success: function (data) {
                    scheduler.parse(data, "json");
                },
                error: function(x, y, z) {
                    alert(x + '\n' + y + '\n' + z);
                }
            });
        });

        //scheduler.parse([
        //{ text: "Meeting", start_date: "08.11.2015 14:00", end_date: "08.11.2015 17:00" },
        //{ text: "Conference", start_date: "08-15-2015 12:00", end_date: "08-18-2015 19:00" },
        //{ text: "Interview", start_date: "08-24-2015 09:00", end_date: "08-24-2015 10:00" }
        //], "json");
    </script>
</body>
</html>
